generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               Int               @id @default(autoincrement())
  privyId          String            @unique
  email            String?
  createdAt        DateTime          @default(now())
  wallets          Wallet[]
  lastLogin        DateTime?
  streak           Int               @default(0)
  writingSessions  WritingSession[]
  manaBalance      Int               @default(0)
  totalManaEarned  Int               @default(0)
  farcasterFID     Int?
  ANKYBalance         Int               @default(0) // Assuming smallest unit, like wei for Ethereum
}

model Wallet {
  id          String   @id @default(uuid())
  user        User     @relation(fields: [userId], references: [id])
  userId      Int
  address     String
  chainId     String
  chainType   String
}

model WritingSession {
  id                 String      @id @default(uuid())
  User               User     @relation(fields: [userId], references: [id])
  userId             Int
  startTime          DateTime
  endTime            DateTime
  manaEarned         Float
  multiplier         Float    @default(1.0)
  writingCID         String?
  uploadedToFarcaster Boolean @default(false)
  farcasterHash      String?
}